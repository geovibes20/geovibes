<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <meta charset="UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=SF+Pro+Display:400,700|Roboto:400,700&display=swap" rel="stylesheet">
  <style>
    #geovibes-banner {
  position: relative;
  text-align: center;
  padding: 3em 1em 2em;
  margin-top: 1em;
  background: linear-gradient(to right, #007aff11, #34c75911);
  border-radius: 24px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.05);
  overflow: hidden;
}

.geovibes-text {
  font-size: 3em;
  font-family: 'SF Pro Display', sans-serif;
  font-weight: 800;
  background: linear-gradient(to right, #007aff, #34c759);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin: 0;
  animation: popIn 1s ease;
}

.geovibes-tagline {
  font-size: 1.2em;
  color: #444;
  font-weight: 600;
  margin-top: 0.5em;
  animation: fadeIn 1.5s ease;
}

.glow-circle {
  position: absolute;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, #34c75955 0%, transparent 80%);
  top: -50px;
  left: calc(50% - 150px);
  z-index: 0;
  animation: pulseGlow 3s infinite ease-in-out;
}

.floating-icons {
  display: flex;
  justify-content: center;
  gap: 1.5em;
  margin-top: 1.5em;
  font-size: 1.5em;
  animation: floatIcons 20s linear infinite;
  z-index: 1;
  position: relative;
}

@keyframes popIn {
  from { transform: scale(0.9); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pulseGlow {
  0%, 100% { opacity: 0.5; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.1); }
}

@keyframes floatIcons {
  0% { transform: translateX(0); }
  100% { transform: translateX(-100%); }
}


    body { 
      background: #f8f8fa; 
      color: #111; 
      font-family: 'SF Pro Display', 'Roboto', Arial, sans-serif; 
      margin: 0; 
      transition: all 0.3s ease;
    }
    h1 { 
      text-align: center; 
      color: #007aff; 
      margin-top: 0.5em; 
      font-size: 2.5em; 
      font-family: 'SF Pro Display', Arial, sans-serif; 
      font-weight: 700; 
      letter-spacing: 0.01em; 
    }
    #main-content { 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      max-width: 1000px; 
      margin: 0 auto; 
      padding: 0 1vw 2em 1vw; 
    }
    #timer { 
      font-size: 1.3em; 
      color: #ff9500; 
      font-weight: 700; 
      margin-bottom: 0.5em; 
    }
    #counter { 
      font-size: 1.3em; 
      color: #007aff; 
      font-weight: 700; 
      margin-bottom: 0.5em; 
    }
    #input-row { 
      display: flex; 
      justify-content: center; 
      align-items: center; 
      gap: 0.8em; 
      margin-bottom: 1.5em; 
      width: 100%; 
      max-width: 900px;
      flex-wrap: wrap;
    }
    #capital-input { 
      font-size: 1.3em; 
      padding: 0.7em 1.2em; 
      border-radius: 16px; 
      border: 1.5px solid #e0e0e0; 
      background: #fff; 
      color: #111; 
      outline: none; 
      width: 350px; 
      max-width: 100%;
      font-family: 'SF Pro Display', Arial, sans-serif; 
      font-weight: 600; 
      letter-spacing: 0.03em; 
      box-shadow: 0 1.5px 8px #0001; 
      transition: border 0.2s, box-shadow 0.2s; 
    }
    #capital-input:focus { 
      border: 1.5px solid #007aff; 
      box-shadow: 0 0 0 3px #007aff22; 
    }
    button { 
      background: #007aff; 
      color: #fff; 
      border: none; 
      border-radius: 16px; 
      padding: 0.7em 1.3em; 
      font-size: 1em; 
      font-family: 'SF Pro Display', Arial, sans-serif; 
      font-weight: 700; 
      cursor: pointer; 
      height: 48px; 
      min-height: 48px; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      box-shadow: 0 1px 8px #007aff18; 
      transition: all 0.2s ease; 
      white-space: nowrap;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 3px 12px #007aff33;
    }
    #giveup-btn { background: #ff3b30; }
    #reset-btn { background: #34c759; }
    #cheat-btn { background: #ff9500; }
    #hint-btn { background: #5856d6; }
    #stop-btn { background: #ff2d55; }
    #map-container {
  width: 100%;
  margin: 0 0 2em -0.5vw; /* shifted 2vw more to the left */
  padding: 0;
  box-sizing: border-box;
  display: flex;
  justify-content: flex-start;
}




#map {
  width: 100%;
  height: 650px;
  border-radius: 16px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

    #world-map {
      width: 100%;
      height: auto;
      display: block;
    }
    .country-path {
      fill: #e0e0e0;
      stroke: #ccc;
      stroke-width: 0.5;
      transition: all 0.3s ease;
      cursor: pointer;
      vector-effect: non-scaling-stroke;
    }
    .country-path:hover {
      fill: #d0e3ff;
      stroke: #007aff;
      stroke-width: 1;
    }
    .country-path.guessed {
      fill: #34c759;
      stroke: #2a9e4a;
      stroke-width: 1;
      animation: pulse 0.5s ease;
    }
    .country-path.missed {
      fill: #ff3b30;
      stroke: #d63229;
      stroke-width: 1;
    }
    .capital-marker {
      fill: #007aff;
      stroke: white;
      stroke-width: 1.5;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .capital-marker.guessed {
      fill: #34c759;
      stroke: white;
      animation: bounce 0.5s ease;
    }
    .capital-marker.missed {
      fill: #ff3b30;
      stroke: white;
    }
    .capital-label {
      font-family: 'SF Pro Display', Arial, sans-serif;
      font-size: 10px;
      font-weight: 700;
      fill: white;
      text-anchor: middle;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .country-path:hover + .capital-label,
    .capital-marker:hover + .capital-label {
      opacity: 1;
    }
    .country-tooltip {
      position: absolute;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 14px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.2s ease;
      z-index: 100;
      max-width: 200px;
      text-align: center;
    }
    .zoom-controls {
      position: absolute;
      bottom: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      z-index: 10;
    }
    .zoom-btn {
      width: 36px;
      height: 36px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      cursor: pointer;
      font-size: 18px;
      font-weight: bold;
      user-select: none;
    }
    #countries-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); 
      gap: 0.5em; 
      margin-top: 1.5em; 
      font-size: 1.1em; 
      width: 100%; 
      max-width: 900px; 
      margin-left: auto; 
      margin-right: auto; 
    }
    .country-box { 
      min-height: 3.2em; 
      padding: 0.5em; 
      font-family: 'SF Pro Display', Arial, sans-serif; 
      display: flex; 
      flex-direction: column; 
      align-items: flex-start; 
      gap: 0.25em; 
      background: #fff; 
      color: #222; 
      border-radius: 12px; 
      font-weight: 500; 
      letter-spacing: 0.03em; 
      box-shadow: 0 2px 10px #0001; 
      border: 1px solid #e0e0e0; 
      transition: all 0.2s ease; 
    }
    .country-box:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px #0002;
    }
    .country-box.guessed { 
      background: #eafbf3; 
      color: #34c759; 
      border: 1.5px solid #34c759; 
      font-weight: 700; 
    }
    .country-box.missed { 
      background: #fff0f0; 
      color: #ff3b30; 
      border: 1.5px solid #ff3b30; 
      font-weight: 700; 
    }

    #map {
  width: 120%;
  max-width: 1500px;
  height: 600px;
  border-radius: none;
  box-shadow: none;
  background: #f1f1f3;
}

    .country-name { 
      font-weight: 700; 
      color: #007aff; 
      font-size: 1.05em; 
    }
    .capital-name {
      font-weight: 700;
      font-size: 1em;
      margin-left: 0;
      user-select: none;
    }
    .country-box.guessed .capital-name { color: #34c759; }
    .country-box.missed .capital-name { color: #ff3b30; }
    .capital-name.hidden { 
      color: transparent !important; 
      background: #f8f8fa !important; 
      text-shadow: none !important; 
    }
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.95);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      flex-direction: column;
    }
    #stop-overlay h2, #hint-overlay h2 {
      color: #007aff;
      font-size: 2.5em;
      margin-bottom: 1em;
      text-align: center;
    }
    #hint-overlay .hint-content {
      background: white;
      padding: 2em;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      max-width: 80%;
      text-align: center;
    }
    #hint-overlay .hint-text {
      font-size: 1.5em;
      margin-bottom: 1.5em;
      color: #333;
    }
    #timed-toggle {
      display: flex;
      align-items: center;
      margin-bottom: 1em;
      background: #fff;
      padding: 0.8em 1.5em;
      border-radius: 50px;
      box-shadow: 0 2px 10px #0001;
    }
    #timed-toggle label {
      margin-right: 10px;
      font-weight: bold;
      color: #007aff;
    }
    .progress-container {
      width: 100%;
      max-width: 800px;
      margin: 0.5em auto 1em auto;
      background: #e0e0e0;
      border-radius: 10px;
      height: 10px;
      overflow: hidden;
    }
    #progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #007aff, #34c759);
      transition: width 0.3s ease;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }
    @media (max-width: 768px) {
      h1 { font-size: 2em; margin-top: 0.5em; }
      #input-row { gap: 0.6em; }
      button { padding: 0.7em 1em; font-size: 0.9em; }
      #countries-grid { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
      .zoom-controls {
        bottom: 10px;
        right: 10px;
      }
      .zoom-btn {
        width: 30px;
        height: 30px;
        font-size: 16px;
      }
    }
    @media (max-width: 480px) {
      h1 { font-size: 1.8em; }
      #capital-input { font-size: 1.1em; padding: 0.6em 1em; }
      #countries-grid { grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); font-size: 0.95em; }
      #hint-overlay .hint-content {
        padding: 1.5em;
        max-width: 90%;
      }
      #hint-overlay .hint-text {
        font-size: 1.2em;
      }
      .country-path {
        stroke-width: 0.3;
      }
      .capital-marker {
        stroke-width: 1;
      }
    }
  </style>
</head>
<body>
  
  <div id="geovibes-banner">
  <div class="glow-circle"></div>
  <h2 class="geovibes-text"> GEOVIBES - WORLD CAPITALS QUIZ </h2>
  <p class="geovibes-tagline">Explore the world. One capital at a time.</p>
  <div class="floating-icons">
    
    
  </div>
</div>

  <div id="stop-overlay" class="overlay">
    <h2>Quiz Paused</h2>
    <button id="resume-btn">Resume Quiz</button>
  </div>
  
  <div id="hint-overlay" class="overlay">
    <div class="hint-content">
      <h2>Capital Hint</h2>
      <div class="hint-text" id="hint-text"></div>
      <button id="close-hint-btn">Got It!</button>
    </div>
  </div>

  
  <div id="main-content">
    <div id="timed-toggle">
      <label for="timed-checkbox">Timed Mode</label>
      <input type="checkbox" id="timed-checkbox" checked>
    </div>
    <div id="score-display"></div>
    <div id="timer"></div>
    <div id="counter"></div>
    <div class="progress-container">
      <div id="progress-fill"></div>
    </div>
    <div id="input-row">
      <input id="capital-input" type="text" placeholder="Type a capital..." autocomplete="off" />
      <button id="stop-btn">Stop</button>
<button id="hint-btn">Hint</button>
<button id="giveup-btn">Give Up</button>
<button id="reset-btn">Restart</button>



    </div>
    <div id="map-container">
      <div id="map"></div>
        <!-- Sample countries (in production you'd include all countries) -->
        
        
        
      
      <div class="country-tooltip"></div>
    </div>
    <div id="countries-grid"></div>
  </div>

  <script>
    // Country and capital data
    const capitalsData = [
      { country: "Afghanistan", capital: "Kabul", id: "AF" },
      { country: "Albania", capital: "Tirana", id: "AL" },
      { country: "Algeria", capital: "Algiers", id: "DZ" },
      { country: "Andorra", capital: "Andorra la Vella", id: "AD" },
      { country: "Angola", capital: "Luanda", id: "AO" },
      { country: "Antigua and Barbuda", capital: "Saint John's", id: "AG" },
      { country: "Argentina", capital: "Buenos Aires", id: "AR" },
      { country: "Armenia", capital: "Yerevan", id: "AM" },
      { country: "Australia", capital: "Canberra", id: "AU" },
      { country: "Austria", capital: "Vienna", id: "AT" },
      { country: "Azerbaijan", capital: "Baku", id: "AZ" },
      { country: "Bahamas", capital: "Nassau", id: "BS" },
      { country: "Bahrain", capital: "Manama", id: "BH" },
      { country: "Bangladesh", capital: "Dhaka", id: "BD" },
      { country: "Barbados", capital: "Bridgetown", id: "BB" },
      { country: "Belarus", capital: "Minsk", id: "BY" },
      { country: "Belgium", capital: "Brussels", id: "BE" },
      { country: "Belize", capital: "Belmopan", id: "BZ" },
      { country: "Benin", capital: "Porto Novo", id: "BJ" },
      { country: "Bhutan", capital: "Thimphu", id: "BT" },
      { country: "Bolivia", capital: "Sucre", id: "BO" },
      { country: "Bosnia and Herzegovina", capital: "Sarajevo", id: "BA" },
      { country: "Botswana", capital: "Gaborone", id: "BW" },
      { country: "Brazil", capital: "Brasilia", id: "BR" },
      { country: "Brunei", capital: "Bandar Seri Begawan", id: "BN" },
      { country: "Bulgaria", capital: "Sofia", id: "BG" },
      { country: "Burkina Faso", capital: "Ouagadougou", id: "BF" },
      { country: "Burundi", capital: "Gitega", id: "BI" },
      { country: "Cambodia", capital: "Phnom Penh", id: "KH" },
      { country: "Cameroon", capital: "Yaounde", id: "CM" },
      { country: "Canada", capital: "Ottawa", id: "CA" },
      { country: "Cape Verde", capital: "Praia", id: "CV" },
      { country: "Central African Republic", capital: "Bangui", id: "CF" },
      { country: "Chad", capital: "N'Djamena", id: "TD" },
      { country: "Chile", capital: "Santiago", id: "CL" },
      { country: "China", capital: "Beijing", id: "CN" },
      { country: "Colombia", capital: "Bogota", id: "CO" },
      { country: "Comoros", capital: "Moroni", id: "KM" },
      { country: "Congo (Congo-Brazzaville)", capital: "Brazzaville", id: "CG" },
      { country: "Costa Rica", capital: "San Jose", id: "CR" },
      { country: "Croatia", capital: "Zagreb", id: "HR" },
      { country: "Cuba", capital: "Havana", id: "CU" },
      { country: "Cyprus", capital: "Nicosia", id: "CY" },
      { country: "Czechia (Czech Republic)", capital: "Prague", id: "CZ" },
      { country: "Democratic Republic of the Congo", capital: "Kinshasa", id: "CD" },
      { country: "Denmark", capital: "Copenhagen", id: "DK" },
      { country: "Djibouti", capital: "Djibouti", id: "DJ" },
      { country: "Dominica", capital: "Roseau", id: "DM" },
      { country: "Dominican Republic", capital: "Santo Domingo", id: "DO" },
      { country: "Ecuador", capital: "Quito", id: "EC" },
      { country: "Egypt", capital: "Cairo", id: "EG" },
      { country: "El Salvador", capital: "San Salvador", id: "SV" },
      { country: "Equatorial Guinea", capital: "Malabo", id: "GQ" },
      { country: "Eritrea", capital: "Asmara", id: "ER" },
      { country: "Estonia", capital: "Tallinn", id: "EE" },
      { country: "Eswatini (fmr. Swaziland)", capital: "Mbabane", id: "SZ" },
      { country: "Ethiopia", capital: "Addis Ababa", id: "ET" },
      { country: "Fiji", capital: "Suva", id: "FJ" },
      { country: "Finland", capital: "Helsinki", id: "FI" },
      { country: "France", capital: "Paris", id: "FR" },
      { country: "Gabon", capital: "Libreville", id: "GA" },
      { country: "Gambia", capital: "Banjul", id: "GM" },
      { country: "Georgia", capital: "Tbilisi", id: "GE" },
      { country: "Germany", capital: "Berlin", id: "DE" },
      { country: "Ghana", capital: "Accra", id: "GH" },
      { country: "Greece", capital: "Athens", id: "GR" },
      { country: "Grenada", capital: "Saint George's", id: "GD" },
      { country: "Guatemala", capital: "Guatemala City", id: "GT" },
      { country: "Guinea", capital: "Conakry", id: "GN" },
      { country: "Guinea-Bissau", capital: "Bissau", id: "GW" },
      { country: "Guyana", capital: "Georgetown", id: "GY" },
      { country: "Haiti", capital: "Port-au-Prince", id: "HT" },
      { country: "Holy See", capital: "Vatican City", id: "VA" },
      { country: "Honduras", capital: "Tegucigalpa", id: "HN" },
      { country: "Hungary", capital: "Budapest", id: "HU" },
      { country: "Iceland", capital: "Reykjavik", id: "IS" },
      { country: "India", capital: "New Delhi", id: "IN" },
      { country: "Indonesia", capital: "Jakarta", id: "ID" },
      { country: "Iran", capital: "Tehran", id: "IR" },
      { country: "Iraq", capital: "Baghdad", id: "IQ" },
      { country: "Ireland", capital: "Dublin", id: "IE" },
      { country: "Israel", capital: "Jerusalem", id: "IL" },
      { country: "Italy", capital: "Rome", id: "IT" },
      { country: "Jamaica", capital: "Kingston", id: "JM" },
      { country: "Japan", capital: "Tokyo", id: "JP" },
      { country: "Jordan", capital: "Amman", id: "JO" },
      { country: "Kazakhstan", capital: "Nur-Sultan", id: "KZ" },
      { country: "Kenya", capital: "Nairobi", id: "KE" },
      { country: "Kiribati", capital: "South Tarawa", id: "KI" },
      { country: "Kuwait", capital: "Kuwait City", id: "KW" },
      { country: "Kyrgyzstan", capital: "Bishkek", id: "KG" },
      { country: "Laos", capital: "Vientiane", id: "LA" },
      { country: "Latvia", capital: "Riga", id: "LV" },
      { country: "Lebanon", capital: "Beirut", id: "LB" },
      { country: "Lesotho", capital: "Maseru", id: "LS" },
      { country: "Liberia", capital: "Monrovia", id: "LR" },
      { country: "Libya", capital: "Tripoli", id: "LY" },
      { country: "Liechtenstein", capital: "Vaduz", id: "LI" },
      { country: "Lithuania", capital: "Vilnius", id: "LT" },
      { country: "Luxembourg", capital: "Luxembourg", id: "LU" },
      { country: "Madagascar", capital: "Antananarivo", id: "MG" },
      { country: "Malawi", capital: "Lilongwe", id: "MW" },
      { country: "Malaysia", capital: "Kuala Lumpur", id: "MY" },
      { country: "Maldives", capital: "Male", id: "MV" },
      { country: "Mali", capital: "Bamako", id: "ML" },
      { country: "Malta", capital: "Valletta", id: "MT" },
      { country: "Marshall Islands", capital: "Majuro", id: "MH" },
      { country: "Mauritania", capital: "Nouakchott", id: "MR" },
      { country: "Mauritius", capital: "Port Louis", id: "MU" },
      { country: "Mexico", capital: "Mexico City", id: "MX" },
      { country: "Micronesia", capital: "Palikir", id: "FM" },
      { country: "Moldova", capital: "Chisinau", id: "MD" },
      { country: "Monaco", capital: "Monaco", id: "MC" },
      { country: "Mongolia", capital: "Ulaanbaatar", id: "MN" },
      { country: "Montenegro", capital: "Podgorica", id: "ME" },
      { country: "Morocco", capital: "Rabat", id: "MA" },
      { country: "Mozambique", capital: "Maputo", id: "MZ" },
      { country: "Myanmar (formerly Burma)", capital: "Naypyidaw", id: "MM" },
      { country: "Namibia", capital: "Windhoek", id: "NA" },
      { country: "Nauru", capital: "Yaren", id: "NR" },
      { country: "Nepal", capital: "Kathmandu", id: "NP" },
      { country: "Netherlands", capital: "Amsterdam", id: "NL" },
      { country: "New Zealand", capital: "Wellington", id: "NZ" },
      { country: "Nicaragua", capital: "Managua", id: "NI" },
      { country: "Niger", capital: "Niamey", id: "NE" },
      { country: "Nigeria", capital: "Abuja", id: "NG" },
      { country: "North Korea", capital: "Pyongyang", id: "KP" },
      { country: "North Macedonia", capital: "Skopje", id: "MK" },
      { country: "Norway", capital: "Oslo", id: "NO" },
      { country: "Oman", capital: "Muscat", id: "OM" },
      { country: "Pakistan", capital: "Islamabad", id: "PK" },
      { country: "Palau", capital: "Ngerulmud", id: "PW" },
      { country: "Panama", capital: "Panama City", id: "PA" },
      { country: "Papua New Guinea", capital: "Port Moresby", id: "PG" },
      { country: "Paraguay", capital: "Asuncion", id: "PY" },
      { country: "Peru", capital: "Lima", id: "PE" },
      { country: "Philippines", capital: "Manila", id: "PH" },
      { country: "Poland", capital: "Warsaw", id: "PL" },
      { country: "Portugal", capital: "Lisbon", id: "PT" },
      { country: "Qatar", capital: "Doha", id: "QA" },
      { country: "Romania", capital: "Bucharest", id: "RO" },
      { country: "Russia", capital: "Moscow", id: "RU" },
      { country: "Rwanda", capital: "Kigali", id: "RW" },
      { country: "Saint Kitts and Nevis", capital: "Basseterre", id: "KN" },
      { country: "Saint Lucia", capital: "Castries", id: "LC" },
      { country: "Saint Vincent and the Grenadines", capital: "Kingstown", id: "VC" },
      { country: "Samoa", capital: "Apia", id: "WS" },
      { country: "San Marino", capital: "San Marino", id: "SM" },
      { country: "Sao Tome and Principe", capital: "Sao Tome", id: "ST" },
      { country: "Saudi Arabia", capital: "Riyadh", id: "SA" },
      { country: "Senegal", capital: "Dakar", id: "SN" },
      { country: "Serbia", capital: "Belgrade", id: "RS" },
      { country: "Seychelles", capital: "Victoria", id: "SC" },
      { country: "Sierra Leone", capital: "Freetown", id: "SL" },
      { country: "Singapore", capital: "Singapore", id: "SG" },
      { country: "Slovakia", capital: "Bratislava", id: "SK" },
      { country: "Slovenia", capital: "Ljubljana", id: "SI" },
      { country: "Solomon Islands", capital: "Honiara", id: "SB" },
      { country: "Somalia", capital: "Mogadishu", id: "SO" },
      { country: "South Africa", capital: "Pretoria", id: "ZA" },
      { country: "South Korea", capital: "Seoul", id: "KR" },
      { country: "South Sudan", capital: "Juba", id: "SS" },
      { country: "Spain", capital: "Madrid", id: "ES" },
      { country: "Sri Lanka", capital: "Colombo", id: "LK" },
      { country: "Sudan", capital: "Khartoum", id: "SD" },
      { country: "Suriname", capital: "Paramaribo", id: "SR" },
      { country: "Sweden", capital: "Stockholm", id: "SE" },
      { country: "Switzerland", capital: "Bern", id: "CH" },
      { country: "Syria", capital: "Damascus", id: "SY" },
      { country: "Tajikistan", capital: "Dushanbe", id: "TJ" },
      { country: "Tanzania", capital: "Dodoma", id: "TZ" },
      { country: "Thailand", capital: "Bangkok", id: "TH" },
      { country: "Timor-Leste", capital: "Dili", id: "TL" },
      { country: "Togo", capital: "Lome", id: "TG" },
      { country: "Tonga", capital: "Nuku'alofa", id: "TO" },
      { country: "Trinidad and Tobago", capital: "Port of Spain", id: "TT" },
      { country: "Tunisia", capital: "Tunis", id: "TN" },
      { country: "Turkey", capital: "Ankara", id: "TR" },
      { country: "Turkmenistan", capital: "Ashgabat", id: "TM" },
      { country: "Tuvalu", capital: "Funafuti", id: "TV" },
      { country: "Uganda", capital: "Kampala", id: "UG" },
      { country: "Ukraine", capital: "Kyiv", id: "UA" },
      { country: "United Arab Emirates", capital: "Abu Dhabi", id: "AE" },
      { country: "United Kingdom", capital: "London", id: "GB" },
      { country: "United States", capital: "Washington", id: "US" },
      { country: "Uruguay", capital: "Montevideo", id: "UY" },
      { country: "Uzbekistan", capital: "Tashkent", id: "UZ" },
      { country: "Vanuatu", capital: "Port Vila", id: "VU" },
      { country: "Venezuela", capital: "Caracas", id: "VE" },
      { country: "Vietnam", capital: "Hanoi", id: "VN" },
      { country: "Yemen", capital: "Sana'a", id: "YE" },
      { country: "Zambia", capital: "Lusaka", id: "ZM" },
      { country: "Zimbabwe", capital: "Harare", id: "ZW" },
      { country: "C么te d'Ivoire", capital: "Yamoussoukro", id: "CI" },
      { country: "Czech Republic", capital: "Prague", id: "CZ" },

    ];

    // Add this right after capitalsData
const countryNameMapping = {
  // Countries you specifically asked about
  "Russia": "Russian Federation",
  "Tanzania": "United Republic of Tanzania",
  "Serbia": "Republic of Serbia",
  "Czechia (Czech Republic)": "Czech Republic",
  "Greenland": "Greenland", // Note: Greenland is technically part of Denmark
  "France": "France",
  "Morocco": "Morocco",
  "Ghana": "Ghana",
  "Benin": "Benin",
   "Morocco": "Morocco",
  "Somalia": "Somalia",
  "Eswatini (fmr. Swaziland)": "Eswatini",
  "Czechia (Czech Republic)": "Czech Republic",
   "country: C么te d'Ivoire":"Yamoussoukro",
 "Czech Republic": "Prague",
 "Kosovo" : "Pristina" , // This one is fine if your GeoJSON supports "Kosovo"
  "Taiwan": "Taiwan",
  "Kosovo": "Kosovo",
  "Morocco": "Morocco",
"Somalia": "Somalia",
"Eswatini": "Swaziland",               // GeoJSON uses old name
"Czechia (Czech Republic)": "Czech Republic",
"Ivory Coast": "C么te d'Ivoire",
"Taiwan": "Taiwan",
"Kosovo": "Kosovo",
"C么te d'Ivoire": "Ivory Coast",
"Czech Republic": "Czech Republic",
"Kosovo": "Kosovo",
"Somalia": "Somalia",


  

  // Other countries that might need mapping
  "United States": "United States of America",
  "Democratic Republic of the Congo": "Democratic Republic of the Congo",
  "Congo (Congo-Brazzaville)": "Republic of the Congo",
  "Eswatini (fmr. Swaziland)": "Swaziland",
  "Myanmar (formerly Burma)": "Myanmar",
  "North Macedonia": "Macedonia",
  "Holy See": "Vatican",
  "Ivory Coast": "C么te d'Ivoire",
  "Timor-Leste": "East Timor",
  "Brunei": "Brunei Darussalam",
  "Cape Verde": "Cabo Verde",
  "S茫o Tom茅 and Pr铆ncipe": "S茫o Tom茅 and Pr铆ncipe",
  "South Korea": "Republic of Korea",
  "North Korea": "Dem. Rep. Korea",
  "Laos": "Lao PDR",
  "Syria": "Syrian Arab Republic",
  "Vietnam": "Viet Nam",
  "Iran": "Islamic Republic of Iran",
  "Libya": "Libyan Arab Jamahiriya",
  "Moldova": "Republic of Moldova",
  "Venezuela": "Bolivarian Republic of Venezuela",
  "Bolivia": "Plurinational State of Bolivia",
  "United Arab Emirates": "United Arab Emirates",
  "The Bahamas": "Bahamas",
  "The Gambia": "Gambia",
  
  
  // Island nations and territories
  "Fiji": "Fiji",
  "Marshall Islands": "Marshall Islands",
  "Micronesia": "Federated States of Micronesia",
  "Palau": "Palau",
  "Samoa": "Samoa",
  "Solomon Islands": "Solomon Islands",
  "Tonga": "Tonga",
  "Tuvalu": "Tuvalu",
  "Vanuatu": "Vanuatu",
  
  // European countries
  "Albania": "Albania",
  "Andorra": "Andorra",
  "Austria": "Austria",
  "Belarus": "Belarus",
  "Belgium": "Belgium",
  "Bosnia and Herzegovina": "Bosnia and Herzegovina",
  "Bulgaria": "Bulgaria",
  "Croatia": "Croatia",
  "Denmark": "Denmark",
  "Estonia": "Estonia",
  "Finland": "Finland",
  "Germany": "Germany",
  "Greece": "Greece",
  "Hungary": "Hungary",
  "Iceland": "Iceland",
  "Ireland": "Ireland",
  "Italy": "Italy",
  "Latvia": "Latvia",
  "Liechtenstein": "Liechtenstein",
  "Lithuania": "Lithuania",
  "Luxembourg": "Luxembourg",
  "Malta": "Malta",
  "Monaco": "Monaco",
  "Montenegro": "Montenegro",
  "Netherlands": "Netherlands",
  "Norway": "Norway",
  "Poland": "Poland",
  "Portugal": "Portugal",
  "Romania": "Romania",
  "San Marino": "San Marino",
  "Slovakia": "Slovakia",
  "Slovenia": "Slovenia",
  "Spain": "Spain",
  "Sweden": "Sweden",
  "Switzerland": "Switzerland",
  "Ukraine": "Ukraine",
  "United Kingdom": "United Kingdom",
  
  // Asian countries
  "Afghanistan": "Afghanistan",
  "Armenia": "Armenia",
  "Azerbaijan": "Azerbaijan",
  "Bahrain": "Bahrain",
  "Bangladesh": "Bangladesh",
  "Bhutan": "Bhutan",
  "Cambodia": "Cambodia",
  "China": "People's Republic of China",
  "Cyprus": "Cyprus",
  "Georgia": "Georgia",
  "India": "India",
  "Indonesia": "Indonesia",
  "Iraq": "Iraq",
  "Israel": "Israel",
  "Japan": "Japan",
  "Jordan": "Jordan",
  "Kazakhstan": "Kazakhstan",
  "Kuwait": "Kuwait",
  "Kyrgyzstan": "Kyrgyzstan",
  "Lebanon": "Lebanon",
  "Malaysia": "Malaysia",
  "Maldives": "Maldives",
  "Mongolia": "Mongolia",
  "Nepal": "Nepal",
  "Oman": "Oman",
  "Pakistan": "Pakistan",
  "Philippines": "Philippines",
  "Qatar": "Qatar",
  "Saudi Arabia": "Saudi Arabia",
  "Singapore": "Singapore",
  "Sri Lanka": "Sri Lanka",
  "Taiwan": "Taiwan",
  "Tajikistan": "Tajikistan",
  "Thailand": "Thailand",
  "Turkey": "Turkey",
  "Turkmenistan": "Turkmenistan",
  "Uzbekistan": "Uzbekistan",
  "Yemen": "Yemen",
  
  // African countries
  "Algeria": "Algeria",
  "Angola": "Angola",
  "Botswana": "Botswana",
  "Burkina Faso": "Burkina Faso",
  "Burundi": "Burundi",
  "Cameroon": "Cameroon",
  "Central African Republic": "Central African Republic",
  "Chad": "Chad",
  "Comoros": "Comoros",
  "Djibouti": "Djibouti",
  "Egypt": "Egypt",
  "Equatorial Guinea": "Equatorial Guinea",
  "Eritrea": "Eritrea",
  "Ethiopia": "Ethiopia",
  "Gabon": "Gabon",
  "Guinea": "Guinea",
  "Guinea-Bissau": "Guinea-Bissau",
  "Kenya": "Kenya",
  "Lesotho": "Lesotho",
  "Liberia": "Liberia",
  "Madagascar": "Madagascar",
  "Malawi": "Malawi",
  "Mali": "Mali",
  "Mauritania": "Mauritania",
  "Mauritius": "Mauritius",
  "Mozambique": "Mozambique",
  "Namibia": "Namibia",
  "Niger": "Niger",
  "Nigeria": "Nigeria",
  "Rwanda": "Rwanda",
  "Senegal": "Senegal",
  "Seychelles": "Seychelles",
  "Sierra Leone": "Sierra Leone",
  "Somalia": "Somalia",
  "South Africa": "South Africa",
  "South Sudan": "South Sudan",
  "Sudan": "Sudan",
  "Togo": "Togo",
  "Tunisia": "Tunisia",
  "Uganda": "Uganda",
  "Zambia": "Zambia",
  "Zimbabwe": "Zimbabwe",
  
  // Americas
  "Antigua and Barbuda": "Antigua and Barbuda",
  "Argentina": "Argentina",
  "Bahamas": "Bahamas",
  "Barbados": "Barbados",
  "Belize": "Belize",
  "Brazil": "Brazil",
  "Canada": "Canada",
  "Chile": "Chile",
  "Colombia": "Colombia",
  "Costa Rica": "Costa Rica",
  "Cuba": "Cuba",
  "Dominica": "Dominica",
  "Dominican Republic": "Dominican Republic",
  "Ecuador": "Ecuador",
  "El Salvador": "El Salvador",
  "Grenada": "Grenada",
  "Guatemala": "Guatemala",
  "Guyana": "Guyana",
  "Haiti": "Haiti",
  "Honduras": "Honduras",
  "Jamaica": "Jamaica",
  "Mexico": "Mexico",
  "Nicaragua": "Nicaragua",
  "Panama": "Panama",
  "Paraguay": "Paraguay",
  "Peru": "Peru",
  "Saint Kitts and Nevis": "Saint Kitts and Nevis",
  "Saint Lucia": "Saint Lucia",
  "Saint Vincent and the Grenadines": "Saint Vincent and the Grenadines",
  "Suriname": "Suriname",
  "Trinidad and Tobago": "Trinidad and Tobago",
  "Uruguay": "Uruguay",
  "Venezuela": "Venezuela"
};

    let map;
let countryLayers = {};
let zoomedIn = false;

function colorCountryOnMap(countryName, status) {
  const geoName = countryNameMapping[countryName] || countryName;
  
  for (const key in countryLayers) {
    if (key === geoName) {
      const color = status === 'guessed' ? '#34c759' : '#ff3b30';
      const borderColor = status === 'guessed' ? '#2a9e4a' : '#d63229';
      
      countryLayers[key].setStyle({
        fillColor: color,
        color: borderColor,
        weight: 1,
        fillOpacity: 0.7
      });
    }
  }
}




async function loadMap() {
  map = L.map('map', {
    zoomControl: false,
    attributionControl: false,
    dragging: false,
    doubleClickZoom: false,
    scrollWheelZoom: false,
    boxZoom: false,
    keyboard: false,
    tap: false,
    touchZoom: false
  }).setView([20, 0], 2);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '',
    minZoom: 2,
    maxZoom: 6
  }).addTo(map);

  const geojson = await fetch('https://raw.githubusercontent.com/datasets/geo-countries/master/data/countries.geojson').then(r => r.json());

  function highlightFeature(e) {
    var layer = e.target;
    layer.setStyle({
      weight: 3,
      color: '#007aff',
      fillOpacity: 0.8
    });
    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
      layer.bringToFront();
    }
  }

  function resetHighlight(e) {
    var layer = e.target;
    layer.setStyle({
      weight: 1,
      color: '#bbb',
      fillOpacity: 0.7
    });
  }

  function onEachFeature(feature, layer) {
    const quizName = countryNameMapping[feature.properties.ADMIN || feature.properties.name] || feature.properties.ADMIN || feature.properties.name;
    if (quizName) {
      countryLayers[quizName] = layer;
      layer.on({
        mouseover: highlightFeature,
        mouseout: resetHighlight,
        click: function(e) {
          if (!zoomedIn) {
            map.setView(e.latlng, 3, { animate: true });
            zoomedIn = true;
          }
        }
      });
    }
  }

  L.geoJSON(geojson, {
    style: feature => ({
      fillColor: "#fff",
      weight: 1,
      opacity: 1,
      color: "#bbb",
      fillOpacity: 0.7
    }),
    onEachFeature: onEachFeature
  }).addTo(map);

  map.on('click', function(e) {
    if (zoomedIn) {
      map.setView([20, 0], 2, { animate: true });
      zoomedIn = false;
    }
  });
}





    // Timer functionality
    let timerInterval = null;
    let timeLeft = 15 * 60;
    let timerRunning = false;
    const timerEl = document.getElementById('timer');

    function updateTimerDisplay() {
  const min = Math.floor(timeLeft / 60).toString().padStart(2, '0');
  const sec = (timeLeft % 60).toString().padStart(2, '0');
  timerEl.textContent = `Time Left: ${min}:${sec}`;
  
  // Add this condition
  if (timeLeft === 0) {
    giveUp();
  }
}

    function startTimer() {
      if (timerInterval) clearInterval(timerInterval);
      timerRunning = true;
      timerInterval = setInterval(() => {
        if (timeLeft > 0) {
          timeLeft--;
          updateTimerDisplay();
          if (timeLeft === 0) {
            stopTimer();
            giveUp();
          }
        }
      }, 1000);
    }

    function stopTimer() {
      timerRunning = false;
      if (timerInterval) clearInterval(timerInterval);
    }

    function resetTimer() {
      stopTimer();
      timeLeft = 15 * 60;
      updateTimerDisplay();
    }

    // Quiz state
    const guessedCountries = new Set();
    let gaveUp = false;

    // Score tracking
    let highScore = localStorage.getItem('capitalsHighScore') || 0;
    let currentStreak = 0;
    let bestStreak = localStorage.getItem('capitalsBestStreak') || 0;

    function updateScore() {
      currentStreak++;
      if (currentStreak > bestStreak) {
        bestStreak = currentStreak;
        localStorage.setItem('capitalsBestStreak', bestStreak);
      }
      if (guessedCountries.size > highScore) {
        highScore = guessedCountries.size;
        localStorage.setItem('capitalsHighScore', highScore);
      }
    }

    function updateScoreDisplay() {
      document.getElementById('score-display').innerHTML = `
        <div style="display: flex; gap: 1.5em; justify-content: center; flex-wrap: wrap;">
          <span>High Score: <strong>${highScore}</strong></span>
          <span>Current Streak: <strong>${currentStreak}</strong></span>
          <span>Best Streak: <strong>${bestStreak}</strong></span>
        </div>
      `;
    }

    function renderCounter() {
      document.getElementById('counter').textContent =
        `Guessed: ${guessedCountries.size} / ${capitalsData.length}`;
    }

    function updateProgressBar() {
      const progress = (guessedCountries.size / capitalsData.length) * 100;
      document.getElementById('progress-fill').style.width = `${progress}%`;
    }

    function renderCountriesGrid() {
      const grid = document.getElementById('countries-grid');
      grid.innerHTML = '';
      capitalsData.forEach(({ country, capital }) => {
        const box = document.createElement('div');
        box.className = 'country-box' +
          (guessedCountries.has(country) ? ' guessed' : '') +
          (gaveUp && !guessedCountries.has(country) ? ' missed' : '');
        box.innerHTML = `
          <span class="country-name">${country}</span>
          <span class="capital-name${guessedCountries.has(country) || gaveUp ? '' : ' hidden'}">${capital}</span>
        `;
        grid.appendChild(box);
      });
    }

    

    function onCapitalGuessed(countryName, countryId) {
  guessedCountries.add(countryName);
  updateScore();
  updateScoreDisplay();
  updateProgressBar();
  colorCountryOnMap(countryName, "guessed"); // Changed from countryId to countryName
  renderCounter();
  renderCountriesGrid();
  if (guessedCountries.size === capitalsData.length) {
    stopTimer();
  }
}

    function giveUp() {
  gaveUp = true;
  stopTimer();
  
  capitalsData.forEach(({ country }) => {
    if (!guessedCountries.has(country)) {
      colorCountryOnMap(country, "missed");
      // Special case for Denmark/Greenland
      if (country === "Denmark" && countryLayers["Greenland"]) {
        countryLayers["Greenland"].setStyle({
          fillColor: '#ff3b30',
          color: '#d63229',
          fillOpacity: 0.7,
          weight: 1
        });
      }
    }
  });

  
  
  renderCountriesGrid();
}

    function resetQuiz() {
  guessedCountries.clear();
  gaveUp = false;
  currentStreak = 0;
  updateScoreDisplay();
  updateProgressBar();
  renderCounter();
  renderCountriesGrid();
  
  // Reset all countries to default color
  for (const key in countryLayers) {
    countryLayers[key].setStyle({
      fillColor: '#fff',
      color: '#bbb',
      fillOpacity: 0.7,
      weight: 1
    });
  }
  
  // Special case for Greenland (part of Denmark)
  if (countryLayers["Greenland"]) {
    countryLayers["Greenland"].setStyle({
      fillColor: '#fff',
      color: '#bbb',
      fillOpacity: 0.7,
      weight: 1
    });
  }
  
  if (document.getElementById('timed-checkbox').checked) {
    resetTimer();
    startTimer();
  }
  document.getElementById('capital-input').value = '';
  document.getElementById('capital-input').focus();
}

    // Initialize SVG map with tooltips and zoom
    function initMap() {
      const svg = document.getElementById('world-map');
      const tooltip = document.querySelector('.country-tooltip');
      loadMap();

      
      // Add country tooltips
      document.querySelectorAll('.country-path').forEach(path => {
        path.addEventListener('mouseenter', (e) => {
          const countryName = path.dataset.name;
          const rect = path.getBoundingClientRect();
          tooltip.textContent = countryName;
          tooltip.style.left = `${rect.left + window.scrollX}px`;
          tooltip.style.top = `${rect.top + window.scrollY - 40}px`;
          tooltip.style.opacity = '1';
        });
        
        path.addEventListener('mouseleave', () => {
          tooltip.style.opacity = '0';
        });
      });

      // Zoom functionality
      let scale = 1;
      document.getElementById('zoom-in').addEventListener('click', () => {
        scale *= 1.2;
        svg.style.transform = `scale(${scale})`;
      });

      document.getElementById('zoom-out').addEventListener('click', () => {
        scale /= 1.2;
        svg.style.transform = `scale(${scale})`;
      });
    }

    // Hint system
    function showHint() {
      const unguessed = capitalsData.filter(({ country }) => !guessedCountries.has(country));
      if (unguessed.length === 0) return;
      
      const randomCountry = unguessed[Math.floor(Math.random() * unguessed.length)];
      const hintText = `The capital of <strong>${randomCountry.country}</strong> starts with "<strong>${randomCountry.capital.substring(0, 3)}...</strong>"`;
      
      document.getElementById('hint-text').innerHTML = hintText;
      document.getElementById('hint-overlay').style.display = 'flex';
    }

    // Event listeners
    document.getElementById('capital-input').addEventListener('input', function(e) {
      if (gaveUp || !timerRunning && document.getElementById('timed-checkbox').checked) return;
      const val = this.value.trim().toLowerCase().replace(/[\u2019]/g, "'");
      
      for (const { country, capital, id } of capitalsData) {
        const normCapital = capital.toLowerCase().replace(/[\u2019]/g, "'");
        if (!guessedCountries.has(country) && normCapital === val) {
          onCapitalGuessed(country, id);
          this.value = '';
          break;
        }
      }
    });

    document.getElementById('giveup-btn').addEventListener('click', giveUp);
    document.getElementById('reset-btn').addEventListener('click', resetQuiz);
    document.getElementById('stop-btn').addEventListener('click', () => {
      document.getElementById('stop-overlay').style.display = 'flex';
      stopTimer();
    });
    document.getElementById('resume-btn').addEventListener('click', () => {
      document.getElementById('stop-overlay').style.display = 'none';
      if (document.getElementById('timed-checkbox').checked) {
        startTimer();
      }
    });
    
    document.getElementById('hint-btn').addEventListener('click', showHint);
    document.getElementById('close-hint-btn').addEventListener('click', () => {
      document.getElementById('hint-overlay').style.display = 'none';
    });
    document.getElementById('timed-checkbox').addEventListener('change', function() {
      if (this.checked) {
        resetTimer();
        startTimer();
        document.getElementById('timer').style.display = 'block';
      } else {
        stopTimer();
        document.getElementById('timer').style.display = 'none';
      }
    });

    // Initialize the quiz
    function init() {
  loadMap(); // Changed from initMap()
  renderCounter();
  renderCountriesGrid();
  updateTimerDisplay();
  updateScoreDisplay();
  updateProgressBar();
  if (document.getElementById('timed-checkbox').checked) {
    startTimer();
  }
  document.getElementById('capital-input').focus();
}
    window.onload = init;
  </script>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</body>
</html>